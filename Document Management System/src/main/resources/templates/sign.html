<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡∏≠‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ - DocuSign Thailand</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .content {
            padding: 40px;
        }

        .document-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .info-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .info-label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .info-value {
            font-size: 1.1rem;
            color: #34495e;
        }

        .comment-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
        }

        .comment-title {
            font-weight: 600;
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .comment-title::before {
            content: "üí¨";
            margin-right: 10px;
        }

        .comment-text {
            color: #856404;
            font-style: italic;
            font-size: 1.1rem;
        }

        .document-preview {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
            border: 2px dashed #dee2e6;
        }

        .document-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            margin-top: 40px;
        }

        .btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(46, 204, 113, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(149, 165, 166, 0.3);
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(231, 76, 60, 0.3);
        }

        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            background: #fff3cd;
            color: #856404;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .signature-area {
            border: 2px dashed #3498db;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            background: #f8f9fa;
        }

        .signature-placeholder {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: column;
            }
            
            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #2ecc71;
        }

        .notification.error {
            background: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîè ‡∏Ç‡∏≠‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h1>
            <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
        </div>

        <div class="content">
            <div class="document-info">
                <div class="info-row">
                    <span class="info-label">üìÑ ‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:</span>
                    <span class="info-value">DOC-002</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üë§ ‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠:</span>
                    <span class="info-value">‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£ (ID: 1)</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚úçÔ∏è ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡πá‡∏ô:</span>
                    <span class="info-value">‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (ID: 2)</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠:</span>
                    <span class="info-value">4 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô 2568</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                    <span class="info-value" id="lastUpdateTime">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
                    <span class="status-badge">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ã‡πá‡∏ô</span>
                </div>
            </div>

            <div class="comment-section">
                <div class="comment-title">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</div>
                <div class="comment-text">"Please review and sign this document."</div>
            </div>

            <div class="document-preview">
                <div class="document-icon">üìÑ</div>
                <h3>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h3>
                <p>‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå: 2.3 MB | PDF Document</p>
                <button class="btn btn-secondary" onclick="previewDocument()" style="margin-top: 15px; flex: none; padding: 10px 20px;">
                    üëÅÔ∏è ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
                </button>
            </div>

            <div class="signature-area">
                <div class="signature-placeholder">üìù ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</div>
                <canvas id="signatureCanvas" width="400" height="150" style="border: 1px solid #ddd; border-radius: 5px; cursor: crosshair; display: none;"></canvas>
                <div style="margin-top: 15px;">
                    <button class="btn btn-secondary" onclick="startSigning()" id="startSignBtn" style="flex: none; padding: 10px 20px;">
                        ‚úèÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠
                    </button>
                    <button class="btn btn-secondary" onclick="clearSignature()" id="clearBtn" style="flex: none; padding: 10px 20px; display: none;">
                        üóëÔ∏è ‡∏•‡∏ö‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô
                    </button>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-danger" onclick="rejectDocument()">
                    ‚ùå ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
                </button>
                <button class="btn btn-secondary" onclick="requestChanges()">
                    üìù ‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                </button>
                <button class="btn btn-primary" onclick="approveDocument()" id="approveBtn">
                    ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡πá‡∏ô
                </button>
            </div>
        </div>

        <div class="footer">
            <p>üîí ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• | ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ SSL</p>
            <p>¬© 2025 DocuSign Thailand. ‡∏™‡∏á‡∏ß‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£.</p>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        let isDrawing = false;
        let canvas, ctx;
        let hasSignature = false;

        function startSigning() {
            const canvas = document.getElementById('signatureCanvas');
            const placeholder = document.querySelector('.signature-placeholder');
            const startBtn = document.getElementById('startSignBtn');
            const clearBtn = document.getElementById('clearBtn');
            
            canvas.style.display = 'block';
            placeholder.style.display = 'none';
            startBtn.style.display = 'none';
            clearBtn.style.display = 'inline-block';
            
            initializeCanvas();
        }

        function initializeCanvas() {
            canvas = document.getElementById('signatureCanvas');
            ctx = canvas.getContext('2d');
            
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            draw(e);
        }

        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
            
            hasSignature = true;
        }

        function stopDrawing() {
            if (isDrawing) {
                isDrawing = false;
                ctx.beginPath();
            }
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                           e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function clearSignature() {
            if (canvas && ctx) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                hasSignature = false;
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function previewDocument() {
            showNotification('üîç ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£...', 'success');
            // Simulate document preview
            setTimeout(() => {
                alert('‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:\n\nüìÑ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à\n\n‡∏Ç‡πâ‡∏≠ 1: ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠\n‡∏Ç‡πâ‡∏≠ 2: ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô\n‡∏Ç‡πâ‡∏≠ 3: ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤\n...\n\n[‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 15 ‡∏´‡∏ô‡πâ‡∏≤]');
            }, 1000);
        }

        async function approveDocument() {
            if (!hasSignature) {
                showNotification('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ã‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£', 'error');
                return;
            }
            
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ?')) {
                showNotification('üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå...', 'success');
                
                // Get signature as base64
                const signatureData = canvas.toDataURL();
                
                try {
                    // Send approval to API
                    const response = await fetch('http://localhost:8080/api/sign', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            requesterId: 1,
                            providerId: 2,
                            documentId: 2,
                            comment: "Document approved and signed",
                            status: "APPROVED",
                            signatureType: "SIGNATURE",
                            signatureData: signatureData,
                            timestamp: new Date().toISOString()
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        showNotification('‚úÖ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡πá‡∏ô‡πÅ‡∏•‡πâ‡∏ß!', 'success');
                        
                        // Update UI
                        document.querySelector('.status-badge').textContent = '‡πÄ‡∏ã‡πá‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                        document.querySelector('.status-badge').style.background = '#d4edda';
                        document.querySelector('.status-badge').style.color = '#155724';
                        
                        // Update timestamp
                        const timeElement = document.getElementById('lastUpdateTime');
                        timeElement.textContent = new Date().toLocaleString('th-TH', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit'
                        });
                        
                        // Disable buttons
                        const buttons = document.querySelectorAll('.action-buttons .btn');
                        buttons.forEach(btn => {
                            btn.disabled = true;
                            btn.style.opacity = '0.5';
                            btn.style.cursor = 'not-allowed';
                        });
                        
                        setTimeout(() => {
                            showNotification('üìß ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏•‡πâ‡∏ß', 'success');
                        }, 1000);
                        
                        console.log('API Response:', result);
                    } else {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                } catch (error) {
                    console.error('Error sending signature:', error);
                    showNotification('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message, 'error');
                }
            }
        }

        async function rejectDocument() {
            const reason = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò:');
            if (reason) {
                showNotification('üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå...', 'success');
                
                try {
                    const response = await fetch('http://localhost:8080/api/sign', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            requesterId: 1,
                            providerId: 2,
                            documentId: 2,
                            comment: reason,
                            status: "REJECTED",
                            signatureType: "REJECTION",
                            timestamp: new Date().toISOString()
                        })
                    });
                    
                    if (response.ok) {
                        showNotification('‚ùå ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡πÅ‡∏•‡πâ‡∏ß', 'error');
                        
                        document.querySelector('.status-badge').textContent = '‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò';
                        document.querySelector('.status-badge').style.background = '#f8d7da';
                        document.querySelector('.status-badge').style.color = '#721c24';
                        
                        // Update timestamp
                        const timeElement = document.getElementById('lastUpdateTime');
                        timeElement.textContent = new Date().toLocaleString('th-TH', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit'
                        });
                        
                        // Disable buttons
                        const buttons = document.querySelectorAll('.action-buttons .btn');
                        buttons.forEach(btn => {
                            btn.disabled = true;
                            btn.style.opacity = '0.5';
                            btn.style.cursor = 'not-allowed';
                        });
                    } else {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                } catch (error) {
                    console.error('Error sending rejection:', error);
                    showNotification('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message, 'error');
                }
            }
        }

        async function requestChanges() {
            const changes = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:');
            if (changes) {
                showNotification('üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå...', 'success');
                
                try {
                    const response = await fetch('http://localhost:8080/api/sign', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            requesterId: 1,
                            providerId: 2,
                            documentId: 2,
                            comment: changes,
                            status: "REVISION_REQUESTED",
                            signatureType: "REQUEST_CHANGES",
                            timestamp: new Date().toISOString()
                        })
                    });
                    
                    if (response.ok) {
                        showNotification('üìù ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß', 'success');
                        
                        document.querySelector('.status-badge').textContent = '‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç';
                        document.querySelector('.status-badge').style.background = '#fff3cd';
                        document.querySelector('.status-badge').style.color = '#856404';
                        
                        // Update timestamp
                        const timeElement = document.getElementById('lastUpdateTime');
                        timeElement.textContent = new Date().toLocaleString('th-TH', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit'
                        });
                        
                        // Disable buttons temporarily
                        const buttons = document.querySelectorAll('.action-buttons .btn');
                        buttons.forEach(btn => {
                            btn.disabled = true;
                            btn.style.opacity = '0.5';
                        });
                        
                        setTimeout(() => {
                            buttons.forEach(btn => {
                                btn.disabled = false;
                                btn.style.opacity = '1';
                            });
                        }, 3000);
                    } else {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                } catch (error) {
                    console.error('Error sending revision request:', error);
                    showNotification('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message, 'error');
                }
            }
        }

        // Initialize page and load document data
        document.addEventListener('DOMContentLoaded', async function() {
            showNotification('üìÑ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            
            // Load initial document status
            try {
                const response = await fetch('http://localhost:8080/api/document/2');
                if (response.ok) {
                    const docData = await response.json();
                    // Update UI with real data if available
                    console.log('Document data loaded:', docData);
                }
            } catch (error) {
                console.log('Could not load document data:', error.message);
            }
        });
    </script>

    <!-- Debug Console -->
    <style>
        .debug-console {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            height: 200px;
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .debug-console h4 {
            margin: 0 0 10px 0;
            color: #3498db;
        }
        
        .debug-console .log-entry {
            margin-bottom: 5px;
            padding: 3px 0;
            border-bottom: 1px solid #34495e;
        }
        
        .debug-console .log-entry.success {
            color: #2ecc71;
        }
        
        .debug-console .log-entry.error {
            color: #e74c3c;
        }
        
        .debug-console .log-entry.info {
            color: #f39c12;
        }
    </style>
    
    <div class="debug-console" id="debugConsole">
        <h4>üîß Debug Console</h4>
        <div id="debugLogs"></div>
    </div>

    <script>
        // Debug logging function
        function debugLog(message, type = 'info') {
            const debugLogs = document.getElementById('debugLogs');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            debugLogs.appendChild(logEntry);
            debugLogs.scrollTop = debugLogs.scrollHeight;
            
            // Keep only last 20 entries
            if (debugLogs.children.length > 20) {
                debugLogs.removeChild(debugLogs.firstChild);
            }
        }

        // Override console.log for debugging
        const originalLog = console.log;
        console.log = function(...args) {
            debugLog(args.join(' '), 'info');
            originalLog.apply(console, args);
        };

        const originalError = console.error;
        console.error = function(...args) {
            debugLog(args.join(' '), 'error');
            originalError.apply(console, args);
        };
    </script>
</body>
</html>